<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controllers/members.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controllers/members.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var MemberHelper = require('../helpers/member-helper');

var CongressController = require('./congress');

/**
 * API controller for retrieving members
 * @module api/controllers/members
 * @requires api/helpers/MemberHelper
 * @requires api/controllers/congress
 */
var exports = {};

/**
 * GET all members
 */
exports.getMembers = function(req, res, next) {
  MemberHelper.getMemberByID(null)
  .then(function(results) {
    res.json(results);
  }).catch(next);
};

/**
 * GET member by id helper
 * @private
 * @param {?(object | string | string[])} id - id(s) (should only be 1 in
 * this case) of members to get
 */
function getMemberByIdHelper(id, res, next) {
  MemberHelper.getMemberByID(id)
  .then(function(results) {
    if (!results || results.length === 0) {
      var err = new Error('No member found with id: ' + JSON.stringify(id));
      err.status = 404;
      throw err;
    }
    res.json(results[0]);
  }).catch(next);
}

/**
 * GET member by bioguide id, provided in the request parameters
 */
exports.getMemberByBioguideId = function(req, res, next) {
  getMemberByIdHelper({ bioguide_id: req.params.bioguide_id }, res, next);
};

exports.getMemberById = exports.getMemberByBioguideId;

/**
 * GET member by thomas id, provided in the request parameters
 */
exports.getMemberByThomasId = function(req, res, next) {
  getMemberByIdHelper({ thomas_id: req.params.thomas_id }, res, next);
};

/**
 * GET member by govtrack id, provided in the request parameters
 */
exports.getMemberByGovtrackId = function(req, res, next) {
  getMemberByIdHelper({ govtrack_id: req.params.govtrack_id }, res, next);
};

/**
 * GET member by lis id, provided in the request parameters
 */
exports.getMemberByLisId = function(req, res, next) {
  getMemberByIdHelper({ lis_id: req.params.lis_id }, res, next);
};

/**
 * GET member by name, provided in the request parameters
 * optional: `exact=true` in the url query if seeking an exact
 *    first, last or full name match
 * optional: `exact_full=true` in the url query if seeking an exact
 *    full name match (this will take precedence over `exact`)
 */
exports.getMemberByName = function(req, res, next) {
  var name = req.params.name;
  if (!name) {
    var err = new Error('Must provide a name in ByName lookup');
    err.status = 400;
    next(err);
  }
  // mode 2 if `exact_full`, mode 1 if `exact`, else mode 0
  var mode = req.query.exact_full ? 2 : (req.query.exact ? 1 : 0);
  MemberHelper.getMemberByName(name, mode)
  .then(function(results) {
    res.json(results);
  }).catch(next);
};

/**
 * GET members by congress, provided in the request parameters
 * (delegates to the getCongressMembers function in congress controller)
 * @function
 * @see module:api/controllers/congress.getCongressMembers
 */
exports.getMembersByCongress = CongressController.getCongressMembers;

module.exports = exports;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-api_controllers_congress.html">api/controllers/congress</a></li><li><a href="module-api_controllers_hello.html">api/controllers/hello</a></li><li><a href="module-api_controllers_members.html">api/controllers/members</a></li><li><a href="module-api_controllers_votes.html">api/controllers/votes</a></li><li><a href="module-api_helpers_CongressHelper.html">api/helpers/CongressHelper</a></li><li><a href="module-api_helpers_MemberHelper.html">api/helpers/MemberHelper</a></li><li><a href="module-api_helpers_VoteHelper.html">api/helpers/VoteHelper</a></li><li><a href="module-api_utils_DBConnector.html">api/utils/DBConnector</a></li><li><a href="module-api_utils_Transformer.html">api/utils/Transformer</a></li></ul><h3>Classes</h3><ul><li><a href="CongressHelper.html">CongressHelper</a></li><li><a href="DBConnector.html">DBConnector</a></li><li><a href="MemberHelper.html">MemberHelper</a></li><li><a href="VoteHelper.html">VoteHelper</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sat Jan 23 2016 14:03:37 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
